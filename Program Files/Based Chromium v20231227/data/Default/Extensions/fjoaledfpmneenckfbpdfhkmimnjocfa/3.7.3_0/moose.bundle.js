!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="43cd8668-37f5-42ed-a155-97344a6558b1",e._sentryDebugIdIdentifier="sentry-dbid-43cd8668-37f5-42ed-a155-97344a6558b1")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"3.7.3"},(globalThis.webpackChunk_nordvpn_browser_extensions=globalThis.webpackChunk_nordvpn_browser_extensions||[]).push([[500],{9500:(e,t,n)=>{function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function s(e,t){return e(t={exports:{}},t.exports),t.exports}n.d(t,{f:()=>ve,t:()=>me});var o=s((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{}t.Panic=n}));r(o),o.Panic;var i=s((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n={Some:Symbol("Maybe.Some"),None:Symbol("Maybe.None")};class r{constructor(e){this.value=e,this.type=n.Some}is_some(){return!0}is_none(){return!1}to_undef(){return this.value}to_null(){return this.value}to_result(e){return u.Ok(this.value)}match(e){return"function"==typeof e.some?e.some(this.value):e.some}change(e){return s(e(this.value))}try_change(e){return e(this.value)}or(e){return this}and(e){return"function"==typeof e?e():e}xor(e){return("function"==typeof e?e():e).is_some()?t.None:this}default(e){return this.value}unwrap(){return this.value}expect(e){return this.value}join(...e){const t=a(e);return t.is_some()?new i([this.value,...t.value]):new l}log(){return console.info(`Maybe.Some(${this.value})`),this}log_some(){return this.log()}log_none(){return this}tap(e){return e(this),this}tap_some(e){return e(this.value),this}tap_none(e){return this}}function s(e){return new r(e)}t.Some=s,t.None=new class{constructor(){this.type=n.None}is_some(){return!1}is_none(){return!0}to_undef(){}to_null(){return null}to_result(e){return u.Err(e)}match(e){return"function"==typeof e.none?e.none():e.none}change(e){return this}try_change(e){return this}or(e){return"function"==typeof e?e():e}and(e){return this}xor(e){const t="function"==typeof e?e():e;return t.is_some()?t:this}default(e){return"function"==typeof e?e():e}unwrap(){throw new o.Panic("Maybe.unwrap was called on None.\n")}expect(e){throw new o.Panic(`Maybe.expect was called on None.\nMessage: ${e}`)}join(...e){return new l}log(){return console.info("Maybe.None"),this}log_some(){return this}log_none(){return this.log()}tap(e){return e(this),this}tap_some(e){return this}tap_none(e){return e(),this}};class i{constructor(e){this.values=e}combine(e){return s(e(...this.values))}try_combine(e){return e(...this.values)}into_maybe(){return s(this.values)}}class l{combine(e){return t.None}try_combine(e){return t.None}into_maybe(){return t.None}}function a(e){const t=[];for(const n of e){if(!n.is_some())return n;t.push(n.value)}return s(t)}var c;(c=t.Maybe||(t.Maybe={})).from_nillable=function(e){return null==e?t.None:s(e)},c.is_maybe=function(e){return null!=e&&(e.type===n.Some||e.type===n.None)},c.all=function(e){return a(e)},c.filter=function(e){const t=[];for(const n of e)n.is_some()&&t.push(n.value);return t},c.join=function(...e){const t=a(e);return t.is_some()?new i(t.value):new l},c.join_nillable=function(...e){const n=function(e){const n=[];for(const r of e){if(null==r)return t.None;n.push(r)}return s(n)}(e);return n.is_some()?new i(n.value):new l},c.join_object=function(e){const n={};for(const r in e){const s=e[r];if(s.is_none())return t.None;n[r]=s.value}return s(n)},c.attempt=function(e){try{return s(e())}catch(e){return t.None}}}));r(i),i.Some,i.None,i.Maybe;var u=s((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n={Ok:Symbol("Result.Ok"),Err:Symbol("Result.Err")};class r{constructor(e){this.value=e,this.type=n.Ok}is_ok(){return!0}is_err(){return!1}ok_maybe(){return i.Some(this.value)}ok_undef(){return this.value}ok_null(){return this.value}err_maybe(){return i.None}err_undef(){}err_null(){return null}default(e){return this.value}default_err(e){return"function"==typeof e?e():e}unwrap(){return this.value}unwrap_err(){throw new o.Panic(`Result.unwrap_err was called on Ok.\nUnderlying Ok value:\n${this.value}`)}expect(e){return this.value}expect_err(e){throw new o.Panic(`Result.expect_err was called on Ok.\nMessage: ${e}\nUnderlying Ok value:\n${this.value}`)}match(e){return"function"==typeof e.ok?e.ok(this.value):e.ok}change(e){return s(e(this.value))}change_err(e){return this}and(e){return"function"==typeof e?e():e}or(e){return this}xor(e,t){return("function"==typeof e?e():e).is_ok()?l("function"==typeof t?t():t):this}try_change(e){return e(this.value)}join(...e){const t=_(e);return t.is_ok()?new a([this.value,...t.value]):new c(t.error)}join_collect_err(...e){const t=h(e);return t.is_ok()?new a([this.value,...t.value]):new c(t.error)}log(){return console.info(`Result.Ok(${this.value})`),this}log_ok(){return this.log()}log_err(){return this}tap(e){return e(this),this}tap_ok(e){return e(this.value),this}tap_err(e){return this}}function s(e){return new r(e)}t.Ok=s;class u{constructor(e){this.error=e,this.type=n.Err}is_ok(){return!1}is_err(){return!0}ok_maybe(){return i.None}ok_undef(){}ok_null(){return null}err_maybe(){return i.Some(this.error)}err_undef(){return this.error}err_null(){return this.error}default(e){return"function"==typeof e?e():e}default_err(e){return this.error}unwrap(){throw new o.Panic(`Result.unwrap was called on Err.\nUnderlying Err value:\n${this.error}`)}unwrap_err(){return this.error}expect(e){throw new o.Panic(`Result.expect was called on Err.\nMessage: ${e}\nUnderlying Err value:\n${this.error}`)}expect_err(e){return this.error}match(e){return"function"==typeof e.err?e.err(this.error):e.err}change(e){return this}change_err(e){return l(e(this.error))}try_change(e){return this}and(e){return this}or(e){const t="function"==typeof e?e():e;return t.is_ok()?t:this}xor(e,t){const n="function"==typeof e?e():e;return n.is_ok()?n:l("function"==typeof t?t():t)}join(...e){return new c(this.error)}join_collect_err(...e){return new c(e.reduce(((e,t)=>(t.is_err()&&e.push(t.error),e)),[this.error]))}log(){return console.error(`Result.Err(${this.error})`),this}log_ok(){return this}log_err(){return this.log()}tap(e){return e(this),this}tap_ok(e){return this}tap_err(e){return e(this.error),this}}function l(e){return new u(e)}t.Err=l;class a{constructor(e){this.values=e}combine(e){return s(e(...this.values))}try_combine(e){return e(...this.values)}into_result(){return s(this.values)}}class c{constructor(e){this.error=e}combine(e){return l(this.error)}try_combine(e){return l(this.error)}into_result(){return l(this.error)}}function _(e){const t=[];for(const n of e){if(!n.is_ok())return n;t.push(n.value)}return s(t)}function h(e){const t=[],n=[];let r=!1;for(const s of e)s.is_ok()?r||t.push(s.value):(r=!0,n.push(s.error));return r?l(n):s(t)}var p;(p=t.Result||(t.Result={})).from_nillable=function(e,t){return null==e?l("function"==typeof t?t():t):s(e)},p.is_result=function(e){return null!=e&&(e.type===n.Ok||e.type===n.Err)},p.all=function(e){return _(e)},p.all_collect_err=function(e){return h(e)},p.join=function(...e){const t=_(e);return t.is_ok()?new a(t.value):new c(t.error)},p.join_collect_err=function(...e){const t=h(e);return t.is_ok()?new a(t.value):new c(t.error)},p.join_object=function(e){const t={};for(const n in e){const r=e[n];if(r.is_err())return l(r.error);t[n]=r.value}return s(t)},p.join_object_collect_err=function(e){const t={},n=[];for(const r in e){const s=e[r];s.is_err()?n.push(s.error):t[r]=s.value}return 0===n.length?s(t):l(n)},p.filter=function(e){const t=[];for(const n of e)n.is_ok()&&t.push(n.value);return t},p.split=function(e){const t=[],n=[];for(const r of e)r.is_ok()?t.push(r.value):n.push(r.error);return[t,n]},p.attempt=function(e){try{return s(e())}catch(e){return l(e)}}}));r(u),u.Ok,u.Err,u.Result;var l=s((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Result=u.Result,t.Ok=u.Ok,t.Err=u.Err,t.Maybe=i.Maybe,t.Some=i.Some,t.None=i.None}));r(l),l.Result,l.Ok,l.Err,l.Maybe;var a=l.Some,c=l.None;class _{constructor(e,t){this.capacity=e,this.squashLen=t,this.head=0,this.buffer=new Array}setSquashLen(e){this.squashLen=Math.min(e,this.capacity)}setCapacity(e){if(e<1)throw new Error("Invalid buffer capacity. Capacity must be at least 1.");this.reorder(),e<this.buffer.length&&(this.buffer=this.buffer.slice(-e)),this.head=this.buffer.length%e,this.capacity=e}pushWithoutSquash(e){this.buffer[this.head]=e,this.head=(this.head+1)%this.capacity}push(e){this.reorder();const t=this.squashLen<0?this.capacity:this.squashLen;for(let n=0;n<t&&this.peek()===e;n++)this.buffer.pop(),this.head=this.buffer.length;this.pushWithoutSquash(e)}peek(){let e=(0===this.head?this.capacity:this.head)-1;return this.buffer[e]}clear(){this.head=0,this.buffer=new Array}toArray(){return this.reorder(),this.buffer}reorder(){const e=this.buffer.slice(this.head,this.buffer.length),t=this.buffer.slice(0,this.head);this.buffer=[...e,...t],this.head=this.buffer.length%this.capacity}}class h{constructor(){this._value=c,this._value=c}set(e){this._value=a(e)}unset(){this._value=c}toEventContext(){return{value:this._value.default(null)}}}const p=e=>{const t=(e,n)=>{for(const r in e){const s=r.split(/(?=[A-Z])/).join("_").toLowerCase();if(e[r]instanceof h){const t=e[r].toEventContext();n[s]=t.value,t.history&&(n[`${r}_history`]=t.history)}else n[s]=t(e[r],{})}return n};return t(e,{})},v={user:{fp:new h,subscription:{history:new h,currentState:{activationDate:new h,planId:new h,frequencyInterval:new h,frequencyUnit:new h,planType:new h,paymentStatus:new h,paymentAmount:new h,paymentCurrency:new h,paymentProvider:new h,subscriptionStatus:new h,merchantId:new h,isActive:new h,isNewCustomer:new h}}},application:{config:{currentState:{testGroup:{value:new h,meta:new h},lastCacheDate:{value:new h,meta:new h},isp:{value:new h,meta:new h},ispAsn:{value:new h,meta:new h},activeNetworkInterface:{value:new h,meta:new h},mobileNetworkType:{value:new h,meta:new h},isOnVpn:{value:new h,meta:new h},securityScore:{value:new h,meta:new h},protocol:{value:new h,meta:new h},technology:{value:new h,meta:new h},threatProtectionLiteEnabled:{value:new h,meta:new h},serverGroup:{value:new h,meta:new h},serverDomain:{value:new h,meta:new h},serverIp:{value:new h,meta:new h},serverCountry:{value:new h,meta:new h},serverCity:{value:new h,meta:new h},ipv6Enabled:{value:new h,meta:new h},systemColorTheme:{value:new h,meta:new h},tokenRenewDate:{value:new h,meta:new h},activeScreen:{value:new class extends h{constructor(e,t=0){super(),this._history=new _(e,t)}set(e){super.set(e),this.pushToHistory(e)}pushToHistory(e){this._history.push(e)}setHistorySize(e){this._history.setCapacity(e)}setHistorySquashSize(e){this._history.setSquashLen(e)}clearHistory(){this._history.clear()}toEventContext(){return{...super.toEventContext(),history:this._history.toArray()}}}(6),meta:new h}},userPreferences:{uiLanguage:{value:new h,meta:new h},appColorTheme:{value:new h,meta:new h},inAppNotificationsEnabled:{value:new h,meta:new h},pushNotificationsEnabled:{value:new h,meta:new h},autoConnectEnabled:{value:new h,meta:new h},autoConnectType:{value:new h,meta:new h},protocol:{value:new h,meta:new h},technology:{value:new h,meta:new h},killSwitchEnabled:{value:new h,meta:new h},threatProtectionLiteEnabled:{value:new h,meta:new h},threatprotectionEnabled:{value:new h,meta:new h},obfuscationEnabled:{value:new h,meta:new h},customDnsEnabled:{value:new h,meta:new h},localNetworkDiscoveryAllowed:{value:new h,meta:new h},splitTunnelingEnabled:{value:new h,meta:new h},tapJackingProtectionEnabled:{value:new h,meta:new h},darkWebMonitorEnabled:{value:new h,meta:new h},meteredVpnConnectionEnabled:{value:new h,meta:new h},mfaEnabled:{value:new h,meta:new h},firewallEnabled:{value:new h,meta:new h},ipv6Enabled:{value:new h,meta:new h},meshnetEnabled:{value:new h,meta:new h},widgetEnabled:{value:new h,meta:new h},remoteAccessEnabled:{value:new h,meta:new h},backgroundProcessesEnabled:{value:new h,meta:new h},routingEnabled:{value:new h,meta:new h},connectionAfterQuittingType:{value:new h,meta:new h},showApplicationIn:{value:new h,meta:new h},spoofingEnabled:{value:new h,meta:new h}}},arch:new h,platform:new h,version:new h,name:new h},device:{type:new h,model:new h,brand:new h,fp:new h,resolution:new h,os:new h,location:{country:new h,city:new h,region:new h},timeZone:new h,browser:{name:new h,version:new h,userAgent:new h},ram:{module:new h,totalMemory:new h,availableMemory:new h,brand:new h}}},f=(e,t,n,r,s,o)=>{const i=void 0===o?new d(e,t,n,r,s):new m(e,t,n,r,s,o);return e=>i.send(e)};class d{constructor(e,t,n,r,s){this.category=e,this.group=t,this.eventName=n,this.tracker=r,this.emptyBody=s}send(e){this.sendWrapped({body:{...this.emptyBody,...e}})}sendWrapped(e){return this.tracker.enqueueEvent({source:"nordvpnapp",event:this.getEventData(),context:p(this.tracker.context),...e})}getEventData(){const e=Date.now(),t=performance.now(),n=(new Date).toISOString().replace(/\.\d{3}/,""),r=this.tracker.getSession().match({some:e=>e,none:()=>{throw new Error("Can't send events before tracker is started`")}});return{category:this.category,group:this.group,name:this.eventName,datetime_local:n,timestamp:e,timestamp_subsec_ns:t,schema:"",lib_version:"0.32.2",destination:"default",environment:this.tracker.getEnvironment(),session:r.sessionData,event_count:r.eventCount}}}class m extends d{constructor(e,t,n,r,s,o){super(e,t,n,r,s),this.flushIntervalMS=o,this.previousBody=c,this.eventCount=0,this.start_timestamp=0,this.start_timestamp_subsec_ns=0,this.timeout=c}send(e){const t={...this.emptyBody,...e},n=JSON.stringify(t);if(this.previousBody.is_some()){const t=this.previousBody.unwrap();t===n?this.eventCount++:(this.flush(t,this.eventCount),this.previousBody=c,this.send(e))}else this.eventCount=1,this.previousBody=a(n),this.start_timestamp=Date.now(),this.start_timestamp_subsec_ns=performance.now(),this.timeout=a(setTimeout((()=>{this.flush(n)}),this.flushIntervalMS))}flush(e,t){const n=t??this.eventCount;this.timeout.is_some()&&clearTimeout(this.timeout.unwrap()),this.timeout=c,this.eventCount=0,this.previousBody=c,this.sendWrapped({body:JSON.parse(e),aggregate:{start_timestamp:this.start_timestamp,start_timestamp_subsec_ns:this.start_timestamp_subsec_ns,end_timestamp:Date.now(),end_timestamp_subsec_ns:performance.now(),aggregation_value:n,aggregation_name:"count"}})}}var g={VOID:-1,PRIMITIVE:0,ARRAY:1,OBJECT:2,DATE:3,REGEXP:4,MAP:5,SET:6,ERROR:7,BIGINT:8};const{VOID:w,PRIMITIVE:y,ARRAY:b,OBJECT:M,DATE:k,REGEXP:E,MAP:S,SET:q,ERROR:C,BIGINT:I}=g,T="object"==typeof self?self:globalThis;var x={deserialize:e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=s=>{if(e.has(s))return e.get(s);const[o,i]=t[s];switch(o){case y:case w:return n(i,s);case b:{const e=n([],s);for(const t of i)e.push(r(t));return e}case M:{const e=n({},s);for(const[t,n]of i)e[r(t)]=r(n);return e}case k:return n(new Date(i),s);case E:{const{source:e,flags:t}=i;return n(new RegExp(e,t),s)}case S:{const e=n(new Map,s);for(const[t,n]of i)e.set(r(t),r(n));return e}case q:{const e=n(new Set,s);for(const t of i)e.add(r(t));return e}case C:{const{name:e,message:t}=i;return n(new T[e](t),s)}case I:return n(BigInt(i),s);case"BigInt":return n(Object(BigInt(i)),s)}return n(new T[o](i),s)};return r})(new Map,e)(0)};const{VOID:O,PRIMITIVE:N,ARRAY:R,OBJECT:A,DATE:D,REGEXP:P,MAP:j,SET:B,ERROR:L,BIGINT:V}=g,z="",{toString:U}={},{keys:$}=Object,W=e=>{const t=typeof e;if("object"!==t||!e)return[N,t];const n=U.call(e).slice(8,-1);switch(n){case"Array":return[R,z];case"Object":return[A,z];case"Date":return[D,z];case"RegExp":return[P,z];case"Map":return[j,z];case"Set":return[B,z]}return n.includes("Array")?[R,n]:n.includes("Error")?[L,n]:[A,n]},H=([e,t])=>e===N&&("function"===t||"symbol"===t);var G,J,F,Y,K,Q,X,Z,ee,te,ne,re,se,oe,ie,ue,le,ae,ce,_e={serialize:(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const s=(e,t)=>{const s=r.push(e)-1;return n.set(t,s),s},o=r=>{if(n.has(r))return n.get(r);let[i,u]=W(r);switch(i){case N:{let t=r;switch(u){case"bigint":i=V,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);t=null;break;case"undefined":return s([O],r)}return s([i,t],r)}case R:{if(u)return s([u,[...r]],r);const e=[],t=s([i,e],r);for(const t of r)e.push(o(t));return t}case A:{if(u)switch(u){case"BigInt":return s([u,r.toString()],r);case"Boolean":case"Number":case"String":return s([u,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());const n=[],l=s([i,n],r);for(const t of $(r))!e&&H(W(r[t]))||n.push([o(t),o(r[t])]);return l}case D:return s([i,r.toISOString()],r);case P:{const{source:e,flags:t}=r;return s([i,{source:e,flags:t}],r)}case j:{const t=[],n=s([i,t],r);for(const[n,s]of r)(e||!H(W(n))&&!H(W(s)))&&t.push([o(n),o(s)]);return n}case B:{const t=[],n=s([i,t],r);for(const n of r)!e&&H(W(n))||t.push(o(n));return n}}const{message:l}=r;return s([i,{name:u,message:l}],r)};return o})(!(t||n),!!t,new Map,r)(e),r}},he=s((function(e,t){const{deserialize:n}=x,{serialize:r}=_e;Object.defineProperty(t,"__esModule",{value:!0}).default="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?n(r(e,t)):structuredClone(e):(e,t)=>n(r(e,t)),t.deserialize=n,t.serialize=r})),pe=r(he);he.deserialize,he.serialize;class ve{constructor(e,t,n,r,s,o,i,u,l=1e3,a=0){this.tracker=new fe(e,t,n,r,s,o,i,u,l,a),this.context=this.tracker.context,this.events=this.tracker.events}async start(){return this.tracker.start()}async stop(){return this.tracker.stop()}setEndpoint(e){this.tracker.setEndpoint(e)}setBatchingLimit(e){this.tracker.setBatchingLimit(e)}setFlushInterval(e){this.tracker.setFlushInterval(e)}}class fe{constructor(e,t,n,r,s,o,i,u,l,a){var _;this.environment=t,this.endpoint=n,this.callback=o,this.onSend=i,this.onError=u,this.eventFlushTimeoutMs=l,this.batchingLimit=a,this.session=c,this.sessionStorage=new de(e),this.events={serviceQuality:{authorization:{register:f("service_quality","authorization","register",_=this,{event_duration:null,event_trigger:null,event_status:null,is_altered_flow_on_nord_account:null}),login:f("service_quality","authorization","login",_,{event_duration:null,event_trigger:null,event_status:null,is_altered_flow_on_nord_account:null}),logout:f("service_quality","authorization","logout",_,{event_duration:null,event_trigger:null,event_status:null,is_altered_flow_on_nord_account:null})},servers:{connect:f("service_quality","servers","connect",_,{event_duration:null,event_status:null,event_trigger:null,vpn_connection_trigger:null,target_connection_preset:null,target_server_selection_rule:null,target_server_list_source:null,target_server_group:null,target_server_domain:null,target_server_ip:null,target_server_country:null,target_server_city:null,target_protocol:null,target_technology:null,threat_protection_lite_enabled:null,connection_duration:null,connection_funnel:null,exception_code:null}),stayOnVpn:f("service_quality","servers","stay_on_vpn",_,{event_duration:null,event_status:null,event_trigger:null,vpn_connection_trigger:null,target_connection_preset:null,target_server_selection_rule:null,target_server_list_source:null,target_server_group:null,target_server_domain:null,target_server_ip:null,target_server_country:null,target_server_city:null,target_protocol:null,target_technology:null,threat_protection_lite_enabled:null,connection_duration:null,connection_funnel:null,exception_code:null}),disconnect:f("service_quality","servers","disconnect",_,{event_duration:null,event_status:null,event_trigger:null,vpn_connection_trigger:null,target_connection_preset:null,target_server_selection_rule:null,target_server_list_source:null,target_server_group:null,target_server_domain:null,target_server_ip:null,target_server_country:null,target_server_city:null,target_protocol:null,target_technology:null,threat_protection_lite_enabled:null,connection_duration:null,connection_funnel:null,exception_code:null}),connectToMeshnetDevice:f("service_quality","servers","connect_to_meshnet_device",_,{event_duration:null,event_status:null,event_trigger:null,vpn_connection_trigger:null,target_connection_preset:null,target_server_selection_rule:null,target_server_list_source:null,target_server_group:null,target_server_domain:null,target_server_ip:null,target_server_country:null,target_server_city:null,target_protocol:null,target_technology:null,threat_protection_lite_enabled:null,connection_duration:null,connection_funnel:null,exception_code:null}),disconnectFromMeshnetDevice:f("service_quality","servers","disconnect_from_meshnet_device",_,{event_duration:null,event_status:null,event_trigger:null,vpn_connection_trigger:null,target_connection_preset:null,target_server_selection_rule:null,target_server_list_source:null,target_server_group:null,target_server_domain:null,target_server_ip:null,target_server_country:null,target_server_city:null,target_protocol:null,target_technology:null,threat_protection_lite_enabled:null,connection_duration:null,connection_funnel:null,exception_code:null})},apiRequest:{requestServers:f("service_quality","api_request","request_servers",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null}),requestTokenCreation:f("service_quality","api_request","request_token_creation",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null}),requestServiceCredentials:f("service_quality","api_request","request_service_credentials",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null}),requestUserServices:f("service_quality","api_request","request_user_services",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null}),requestCurrentUser:f("service_quality","api_request","request_current_user",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null}),requestTokenRenew:f("service_quality","api_request","request_token_renew",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null}),requestServersTechnologyConfiguration:f("service_quality","api_request","request_servers_technology_configuration",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null}),requestServersRecommendations:f("service_quality","api_request","request_servers_recommendations",_,{event_duration:null,event_status:null,event_trigger:null,api_host_name:null,response_code:null,transfer_protocol:null,dns_resolution_time:null,request_filters:null,request_fields:null,limits:null,offset:null,response_summary:null})},status:{startTrial:f("service_quality","status","start_trial",_,{period:null}),heartbeat:f("service_quality","status","heartbeat",_,{period:null}),openApp:f("service_quality","status","open_app",_,{period:null}),firstOpenApp:f("service_quality","status","first_open_app",_,{period:null})}},userInterface:{uiItems:{click:f("user_interface","ui_items","click",_,{item_name:null,item_type:null,item_value:null,form_reference:null}),hover:f("user_interface","ui_items","hover",_,{item_name:null,item_type:null,item_value:null,form_reference:null}),show:f("user_interface","ui_items","show",_,{item_name:null,item_type:null,item_value:null,form_reference:null})},notifications:{show:f("user_interface","notifications","show",_,{item_name:null,item_category:null,item_value:null}),open:f("user_interface","notifications","open",_,{item_name:null,item_category:null,item_value:null}),close:f("user_interface","notifications","close",_,{item_name:null,item_category:null,item_value:null})}},developer:{logging:{log:f("developer","logging","log",_,{arbitrary_integer_value:null,log_level:null,message:null})},exceptionHandling:{catchException:f("developer","exception_handling","catch_exception",_,{arbitrary_integer_value:null,code:null,name:null,message:null,developer_note:null})}},internal:{helper:{setOptionalContext:f("internal","helper","set_optional_context",_,{vpn_auto_connect_type:null,network_interface_type:null})}}},v.application.name.set(r),v.application.version.set(s),v.application.platform.set("emscripten"),v.application.arch.set("wasm32"),this.context=v}async start(){if(this.session.is_some())throw new Error("Tracker already started");this.session=a({eventCount:0,sessionData:await this.sessionStorage.getSession(),flushIntervalHandle:setInterval((()=>{this.sendEvents()}),this.eventFlushTimeoutMs)})}async stop(){if(this.session.is_none())throw new Error("Tracker not yet started");const e=this.session.unwrap().flushIntervalHandle;clearInterval(e);try{await this.sendEvents()}catch(e){this.onError(e)}this.session=c,await this.sessionStorage.incrementSessionCount()}getSession(){return this.session}incrementEventCount(){if(this.session.is_none())throw new Error("Tracker not yet started");this.session.unwrap().eventCount++}getEnvironment(){return this.environment}getCallback(){return this.callback}async enqueueEvent(e){await this.sessionStorage.enqueueEvent(pe(e)),this.incrementEventCount()}async sendEvents(){const e=[];let t=[];for(;;){let t;try{t=await this.sessionStorage.dequeueEvent()}catch(e){this.onError(e);break}if(t.is_none())break;e.push(t.unwrap())}const n=async()=>{const e=pe(t);if(0!==e.length)try{const t=await this.sendEventData(JSON.stringify({data:e}),`${this.endpoint}/v2/app/events`,this.getUserAgent(e[0]));this.onSend(t)}catch(t){this.onError(t);for(const t of e)await this.enqueueEvent(t)}};for(const r of e)if(this.batchingLimit>0)t.push(r),t.length>=this.batchingLimit&&(await n(),t=[]);else try{let e=await this.sendEventData(JSON.stringify(r),`${this.endpoint}/app-events`,this.getUserAgent(r));this.onSend(e)}catch(e){this.onError(e),await this.enqueueEvent(r)}await n()}async sendEventData(e,t,n){return this.callback(e,t,n)}setEndpoint(e){this.endpoint=e}setBatchingLimit(e){this.batchingLimit=e}setFlushInterval(e){if(this.session.is_some()){this.eventFlushTimeoutMs=e;const t=this.session.unwrap().flushIntervalHandle;clearInterval(t),this.session.unwrap().flushIntervalHandle=setInterval((()=>{this.sendEvents()}),this.eventFlushTimeoutMs)}}getUserAgent(e){const t=e.event.lib_version??"No version",n=e.context.device.os||"null",r=e.context.application;return`Moose/${t} (${n}; ${r.platform||"No Platform"} ${r.arch||"No Arch"}) () ${e.event.category}/${e.event.name}`}}class de{constructor(e){this.storage=e}async getSession(){let e,t,n=0;try{n=parseInt(await this.storage.keyValue.get("mooseSessionCount"))}catch(e){await this.storage.keyValue.set("mooseSessionCount",n)}try{e=parseInt(await this.storage.keyValue.get("mooseSessionP1")),t=parseInt(await this.storage.keyValue.get("mooseSessionP2"))}catch(n){e=Math.floor(4294967296*Math.random()),t=Math.floor(4294967296*Math.random()),await this.storage.keyValue.set("mooseSessionP1",e),await this.storage.keyValue.set("mooseSessionP2",t)}return{count:n,fp:{p1:e,p2:t}}}async incrementSessionCount(){let e=0;try{e=parseInt(await this.storage.keyValue.get("mooseSessionCount"))}catch(e){}return this.storage.keyValue.set("mooseSessionCount",e+1)}enqueueEvent(e){return this.storage.queue.enqueue(JSON.stringify(e))}async dequeueEvent(){const e=await this.storage.queue.dequeue();return void 0!==e?a(JSON.parse(e)):c}}!function(e){e.MooseUser="user",e.MooseApp="app"}(G||(G={})),function(e){e.MooseIntent="intent",e.MooseAttempt="attempt",e.MooseSuccess="success",e.MooseFailureDueToUserInterrupt="failure_due_to_user_interrupt",e.MooseFailureDueToRuntimeException="failure_due_to_runtime_exception"}(J||(J={})),function(e){e.MooseAutoConnectUserSetting="auto_connect_user_setting",e.MooseAfterSnooze="after_snooze",e.MooseRetry="retry",e.MooseKeepAlive="keep_alive",e.MooseAfterMeshnetDisconnected="after_meshnet_disconnected",e.MooseRetryAfterNoNet="retry_after_no_net"}(F||(F={})),function(e){e.MooseCustom="custom",e.MooseBrowsing="browsing",e.MooseSpeed="speed",e.MooseDownload="download"}(Y||(Y={})),function(e){e.MooseCity="city",e.MooseCountry="country",e.MooseRecommended="recommended",e.MooseRegion="region",e.MooseSpecialtyServer="specialty_server",e.MooseSpecificServer="specific_server",e.MooseSpecialtyServerWithCountry="specialty_server_with_country",e.MooseSpecialtyServerWithRegion="specialty_server_with_region",e.MooseSpecialtyServerWithSpecificServer="specialty_server_with_specific_server",e.MooseSpecificServerInACountry="specific_server_in_a_country"}(K||(K={})),function(e){e.MooseRecommendedByApi="recommended_by_api",e.MooseLocallyCachedServerList="locally_cached_server_list"}(Q||(Q={})),function(e){e.MooseUdp="udp",e.MooseTcp="tcp",e.MooseRecommended="recommended",e.MooseHttpProxy="http_proxy",e.MooseHttpsProxy="https_proxy"}(X||(X={})),function(e){e.MooseNordlynx="nordlynx",e.MooseOpenvpn="openvpn",e.MooseSkylark="skylark",e.MooseIkev2="ikev2",e.MooseRecommended="recommended"}(Z||(Z={})),function(e){e.MooseButton="button",e.MooseCheckBox="check_box",e.MooseRadioButton="radio_button",e.MooseSwitch="switch",e.MooseSlider="slider",e.MooseTextBox="text_box",e.MooseDropdown="dropdown",e.MooseTabOrScreen="tab_or_screen",e.MooseHyperlink="hyperlink"}(ee||(ee={})),function(e){e.MooseInApp="in_app",e.MoosePush="push"}(te||(te={})),function(e){e.MooseUndefined="undefined",e.MooseDesktop="desktop",e.MooseMobile="mobile",e.MooseServer="server",e.MooseTv="tv"}(ne||(ne={})),function(e){e.MooseInfo="info",e.MooseDebug="debug",e.MooseError="error",e.MooseCritical="critical"}(re||(re={})),function(e){e.MooseEnglish="english",e.MooseFrench="french",e.MooseGerman="german",e.MooseSpanish="spanish",e.MooseChineseTraditional="chinese_traditional",e.MooseChineseSimplified="chinese_simplified",e.MooseChineseHongKong="chinese_hong_kong",e.MooseChineseMacao="chinese_macao",e.MooseJapanese="japanese",e.MooseKorean="korean",e.MoosePortuguesePortugal="portuguese_portugal",e.MoosePortugueseBrazil="portuguese_brazil",e.MooseArabic="arabic",e.MooseChineseTaiwan="chinese_taiwan",e.MooseItalian="italian",e.MoosePolish="polish",e.MooseSwedish="swedish",e.MooseDutch="dutch"}(se||(se={})),function(e){e.MooseWhenOnUntrustedNetwork="when_on_untrusted_network",e.MooseWhenOnAnyNetwork="when_on_any_network",e.MooseWhenOnCellularNetwork="when_on_cellular_network",e.MooseWhenTheAppLaunches="when_the_app_launches",e.MooseNoneOrUnknown="none_or_unknown",e.MooseWhenOnEthernet="when_on_ethernet",e.MooseMultiple="multiple"}(oe||(oe={})),function(e){e.MooseCellular="cellular",e.MooseEthernet="ethernet",e.MooseWifi="wifi",e.MooseOther="other"}(ie||(ie={})),function(e){e.Moose2g="2G",e.Moose3g="3G",e.Moose4g="4G",e.Moose5g="5G",e.MooseEdge="edge",e.MooseOther="other"}(ue||(ue={})),function(e){e.MooseLight="light",e.MooseDark="dark",e.MooseSystem="system"}(le||(le={})),function(e){e.MooseAskEveryTime="ask_every_time",e.MooseStayConnected="stay_connected",e.MooseDisconnect="disconnect"}(ae||(ae={})),function(e){e.MooseDock="dock",e.MooseMenuBar="menu_bar",e.MooseBoth="both"}(ce||(ce={}));var me=Object.freeze({__proto__:null,get ColorTheme(){return le},get DeviceType(){return ne},get EventStatus(){return J},get EventTrigger(){return G},get LogLevel(){return re},get MobileNetworkType(){return ue},get NetworkInterfaceType(){return ie},get NotificationCategory(){return te},get ServerListSource(){return Q},get ServerSelectionRule(){return K},get ShowApplicationIn(){return ce},get UiLanguage(){return se},get UserInterfaceItemType(){return ee},get VpnAutoConnectType(){return oe},get VpnConnectionAfterQuittingType(){return ae},get VpnConnectionPreset(){return Y},get VpnConnectionProtocol(){return X},get VpnConnectionTechnology(){return Z},get VpnConnectionTrigger(){return F}})}}]);